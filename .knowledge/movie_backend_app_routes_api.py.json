{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints for a movie-related application using Flask and Flask-Smorest. It includes routes for fetching movies, registering attendance, adding favorites, and listing user favorites, all backed by Supabase. The file contains route handlers, utility functions for JSON validation and timestamp generation, and external references to the Supabase client.", "external_files": ["../../../supabase_client"], "external_methods": ["get_supabase"], "published": ["blp"], "classes": [{"name": "Movies", "description": "Handles fetching saved movies from the 'movies' table."}, {"name": "Register", "description": "Handles creating attendance records in the 'attendance' table."}, {"name": "FavoritesCreate", "description": "Handles adding a new favorite movie to the 'favorites' table."}, {"name": "FavoritesList", "description": "Handles listing favorites for a specific user."}], "methods": [{"name": "_json_error(message: str, status: int = 400, details: Optional[dict] = None)", "description": "Constructs a JSON payload for error messages.", "scope": "", "scopeKind": ""}, {"name": "str _now_iso()", "description": "Returns the current UTC time in ISO 8601 format.", "scope": "", "scopeKind": ""}, {"name": "Tuple[Any,Optional[Tuple[dict,int]]] _require_supabase()", "description": "Ensures a Supabase client is available and configured.", "scope": "", "scopeKind": ""}, {"name": "Tuple[Optional[Dict[str,Any]],Optional[Tuple[dict,int]]] _validate_json(required_fields: List[str])", "description": "Validates that a request contains required JSON fields.", "scope": "", "scopeKind": ""}, {"name": "get(self)", "description": "Fetches saved movies with pagination support.", "scope": "Movies", "scopeKind": "class"}, {"name": "post(self)", "description": "Creates new attendance records.", "scope": "Register", "scopeKind": "class"}, {"name": "post", "description": "Adds a new favorite movie record."}, {"name": "get(self, user_id: str)", "description": "Retrieves list of favorites for a specified user ID.", "scope": "FavoritesList", "scopeKind": "class"}], "calls": ["request.args.get", "request.is_json", "request.get_json", "client.table", "client.table().select()", "client.table().insert()", "client.table().eq().order()", "datetime.now"], "search-terms": ["Flask API routes", "Supabase backend", "movies endpoint", "favorites endpoint", "attendance registration", "Flask-Smorest Blueprint", "get_supabase", "pagination", "JSON validation"], "state": 2, "file_id": 9, "knowledge_revision": 23, "git_revision": "", "ctags": [{"_type": "tag", "name": "FavoritesCreate", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^class FavoritesCreate(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FavoritesList", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^class FavoritesList(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Movies", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^class Movies(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^class Register(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_json_error", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^def _json_error(message: str, status: int = 400, details: Optional[dict] = None):$/", "language": "Python", "kind": "function", "signature": "(message: str, status: int = 400, details: Optional[dict] = None)"}, {"_type": "tag", "name": "_now_iso", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^def _now_iso() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_require_supabase", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^def _require_supabase() -> Tuple[Any, Optional[Tuple[dict, int]]]:$/", "language": "Python", "typeref": "typename:Tuple[Any,Optional[Tuple[dict,int]]]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_validate_json", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^def _validate_json(required_fields: List[str]) -> Tuple[Optional[Dict[str, Any]], Optional[Tuple/", "language": "Python", "typeref": "typename:Tuple[Optional[Dict[str,Any]],Optional[Tuple[dict,int]]]", "kind": "function", "signature": "(required_fields: List[str])"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^blp = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Movies", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^    def get(self, user_id: str):$/", "language": "Python", "kind": "member", "signature": "(self, user_id: str)", "scope": "FavoritesList", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^    def post(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "FavoritesCreate", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178472/movie_backend/app/routes/api.py", "pattern": "/^    def post(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Register", "scopeKind": "class"}], "hash": "53386d9c390785f320f1df134dcd1b60", "format-version": 4, "code-base-name": "movie_backend", "filename": "movie_backend/app/routes/api.py", "fields": [{"name": "blp = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"23": ""}]}